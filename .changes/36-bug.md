Fix diffing module so removed nodes are included in diff-annotated output. Consolidate `diffUtils` redundancies and repeated logic into functions.
